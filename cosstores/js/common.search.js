var searchCommon={init:function(){this.searchInit()},timer:null,searchInit:function(){$(document).on("keyup focusin",".js-a-input-search, .js-search-input",function(e){var t=$(this).val();searchCommon.timer&&clearTimeout(searchCommon.timer),searchCommon.timer=setTimeout(function(){if(t=t.replace(/[\{\}\[\]\,;:|\)~`!^\_<>@\#$\\\=\(\'\"]/gi,""),13==e.which){if(!(""!=t&&0<t.length))return void alert("검색어를 입력하세요");searchCommon.searchResult(t)}""==t?($(".o-navigation").find(".result-list").html(""),$("#gnb_search").find(".result-list").html(""),$("#gnb_search").removeClass("has-text").removeClass("has-results")):$.ajax({type:"POST",async:!1,cache:!0,dataType:"json",url:hd.common.url("/dpo/autoSuggestion"),data:{searchQuery:encodeURIComponent(t)},success:function(e){var t="";if(0<e.autoSuggestions.length)for(var s=0;s<e.autoSuggestions.length;s++)t+='<li><a href="#" class="a-link" onclick="searchCommon.searchResult(\''+e.autoSuggestions[s].keyword+"')\">"+e.autoSuggestions[s].keyword+"</a></li>";else t+="<li>추천 검색어가 없습니다.</li>";$(".o-navigation").find(".result-list").html(t),$("#gnb_search").find(".result-list").html(t),$("#gnb_search").addClass("has-text").addClass("has-results")},timeout:3e4,beforeSend:!1,complete:!1,error:function(e,t,s){alert("서버 통신 중 에러가 발생했습니다.")}})},500)}),$(document).on("click",".a-icon-search",function(e){$("#inputSearchQuery").focus()})},searchResult:function(e){return 0==(e=e.replace(/(^\s*)|(\s*$)/gi,"")).length?(alert("검색어를 입력하세요."),void $("#inputSearchQuery").focus()):50<e.length?(alert("50자 내외로 입력해주세요."),void $("#inputSearchQuery").focus()):($("#searchQuery").val(encodeURIComponent(e)),$("#searchForm").attr("method","get"),$("#searchForm").attr("action",hd.common.url("/dpo/searchResult")),void $("#searchForm").submit())}};$(function(e){searchCommon.init()});